<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="æˆ‘å’Œ Explosion æ¸¸æˆå¼•æ“é‚£äº›äº‹"><meta name=keywords content="explosion,c++,æ¸¸æˆå¼•æ“,æ¸²æŸ“,å›¾å½¢"><title>Explosion å¼€å‘ç¬”è®° (ä¸‰)</title><link rel=canonical href=https://flyandnotdown.github.io/post/40/><link rel=stylesheet href=/scss/style.min.css><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?a0c486208ba4751b6988ccc92f1479ee",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><meta property="og:title" content="Explosion å¼€å‘ç¬”è®° (ä¸‰)"><meta property="og:description" content="æˆ‘å’Œ Explosion æ¸¸æˆå¼•æ“é‚£äº›äº‹"><meta property="og:url" content="https://flyandnotdown.github.io/post/40/"><meta property="og:site_name" content="Kindemçš„åšå®¢"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="Explosion"><meta property="article:tag" content="Game"><meta property="article:tag" content="Graphics"><meta property="article:published_time" content="2021-05-27T00:00:00+00:00"><meta property="article:modified_time" content="2021-05-27T00:00:00+00:00"><meta name=twitter:title content="Explosion å¼€å‘ç¬”è®° (ä¸‰)"><meta name=twitter:description content="æˆ‘å’Œ Explosion æ¸¸æˆå¼•æ“é‚£äº›äº‹"><link rel="shortcut icon" href=#ZgotmplZ><script async src="https://www.googletagmanager.com/gtag/js?id=G-F3YCH8P4PP"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-F3YCH8P4PP",{anonymize_ip:!1})}</script></head><body><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.body.dataset.scheme="dark":document.body.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended article-page with-toolbar"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header class=site-info><figure class=site-avatar><img src=/img/avatar_hu0f5c0aa158a4e8466efa1fc48b48096f_378948_300x0_resize_q75_box.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
<span class=emoji>ğŸ¯</span></figure><h1 class=site-name><a href=https://flyandnotdown.github.io/>Kindemçš„åšå®¢</a></h1><h2 class=site-description>å±‚æ¥¼ç»ˆç©¶è¯¯å°‘å¹´ï¼Œè‡ªç”±æ—©æ™šä¹±ä½™ç”Ÿ</h2></header><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>å½’æ¡£</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>æœç´¢</span></a></li><li><a href=/friends/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>å‹é“¾</span></a></li><li><a href=/%E5%85%B3%E4%BA%8E/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>å…³äº</span></a></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>æš—è‰²æ¨¡å¼</span></li></ol></aside><main class="main full-width"><div id=article-toolbar><a href=https://flyandnotdown.github.io/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg><span>Back</span></a></div><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/%E6%8A%80%E6%9C%AF/>æŠ€æœ¯</a></header><h2 class=article-title><a href=/post/40/>Explosion å¼€å‘ç¬”è®° (ä¸‰)</a></h2><h3 class=article-subtitle>æˆ‘å’Œ Explosion æ¸¸æˆå¼•æ“é‚£äº›äº‹</h3><footer class=article-time><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--published>May 27, 2021</time></footer></div></header><section class=article-content><h1 id=è¿›å±•æ¦‚è§ˆ>è¿›å±•æ¦‚è§ˆ</h1><h2 id=repo-å»ºè®¾>Repo å»ºè®¾</h2><p>å…ˆè¯´è¯´æœ€è¿‘çš„è¿›å±•å§ï¼Œé¦–å…ˆæ˜¯ Repo æ–¹é¢çš„å»ºè®¾ï¼ŒREADME å…ˆå†™èµ·æ¥å å‘äº†ï¼Œé¡ºä¾¿éšæ‰‹è‡ªå·±ç”»äº†å¼  logo å›¾ä¸Šä¸¢ä¸Šå»å å‘ï¼Œå¯ä»¥ç®€å•çœ‹çœ‹ç°åœ¨çš„ READMEï¼š</p><p><figure style=flex-grow:82;flex-basis:197px><a href=/post/40/1.png data-size=933x1132><img src=/post/40/1.png srcset="/post/40/1_hu4edd90293ef6d47756489ca8548c4a38_146605_480x0_resize_box_3.png 480w, /post/40/1_hu4edd90293ef6d47756489ca8548c4a38_146605_1024x0_resize_box_3.png 1024w" width=933 height=1132 loading=lazy alt=README></a><figcaption>README</figcaption></figure></p><p>å›å¤´è¿˜éœ€è¦æŠŠä¸­æ–‡ç‰ˆçš„ README å’Œå…¶ä»–çš„ç»†èŠ‚æ…¢æ…¢è¡¥èµ·æ¥ï¼Œä¸è¿‡æˆ‘ä»¬ç°åœ¨çœŸæ²¡å¤ªå¤šäººåŠ›æŠ•å…¥è¿™å—ï¼Œè¦åšçš„ä¸œè¥¿å¤ªå¤šäº†ï¼Œä¹‹åæŠŠå¼•æ“æœ¬èº«å®Œå–„çš„å·®ä¸å¤šäº†ä¹‹åå†æ…¢æ…¢å¼„å§ã€‚</p><h2 id=å·¥ç¨‹ç®¡ç†>å·¥ç¨‹ç®¡ç†</h2><p>æˆ‘ä»¬åœ¨å›¢é˜Ÿå†…æ¨å´‡å¤§å®¶ä½¿ç”¨ Issues æ¥äº¤æµã€è·Ÿè¸ªè¿›å±•ï¼Œä½¿ç”¨ Project æ¥ç®¡ç†æ•´ä¸ªé¡¹ç›®ï¼Œå¤§æ¦‚æ•ˆæœæ˜¯è¿™æ ·ï¼š</p><p><figure style=flex-grow:125;flex-basis:301px><a href=/post/40/3.png data-size=1280x1018><img src=/post/40/3.png srcset="/post/40/3_huf917cdfd3565aad66b71d45323e3cc93_214163_480x0_resize_box_3.png 480w, /post/40/3_huf917cdfd3565aad66b71d45323e3cc93_214163_1024x0_resize_box_3.png 1024w" width=1280 height=1018 loading=lazy alt=Issues></a><figcaption>Issues</figcaption></figure></p><p><figure style=flex-grow:140;flex-basis:337px><a href=/post/40/4.png data-size=1462x1041><img src=/post/40/4.png srcset="/post/40/4_hu860f4db80a85fae58b388180c606b79f_319636_480x0_resize_box_3.png 480w, /post/40/4_hu860f4db80a85fae58b388180c606b79f_319636_1024x0_resize_box_3.png 1024w" width=1462 height=1041 loading=lazy alt=Project></a><figcaption>Project</figcaption></figure></p><p>æäº¤ Issues ä¼šè‡ªåŠ¨å…³è”åˆ° Projectï¼ŒMR ä¸­éœ€è¦å…³è”å¯¹åº”çš„ Issuesï¼Œåœ¨ MR å…³é—­æ—¶ï¼ŒIssues ä¼šè‡ªåŠ¨è·Ÿéš MR å…³é—­ï¼Œå¹¶ç§»åŠ¨åˆ° Project çš„ Done ä¸€æ ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½æ–¹ä¾¿åœ°è·Ÿè¸ªéœ€æ±‚å’Œè¿›å±•ã€‚</p><h2 id=ci>CI</h2><p>CI æ–¹é¢æˆ‘ä»¬ç›®å‰ä½¿ç”¨çš„æ˜¯ <a class=link href=https://docs.github.com/cn/actions target=_blank rel=noopener>GitHub Actions</a>ï¼Œä¸å¾—ä¸è¯´è¿™ç©æ„å¯å¡‘æ€§è¦æ¯”å…¶ä»–çš„ CI/CD å·¥å…·å¼ºå¾ˆå¤šï¼Œå†™èµ·æ¥ä¹Ÿæ˜¯æ¯”è¾ƒæ–¹ä¾¿çš„ï¼Œç›®å‰ CI å°±é…ç½®äº†ä¸€ä¸ª cmake æ„å»ºï¼Œè¦†ç›–å¹³å°æœ‰ï¼š</p><ul><li>Ubuntu</li><li>Windows</li></ul><p>å…·ä½“çš„ä»£ç åœ¨è¿™ï¼š<a class=link href=https://github.com/ExplosionEngine/Explosion/tree/master/.github/workflows target=_blank rel=noopener>Actions Code</a>ï¼Œæäº¤ MR åè‡ªåŠ¨è§¦å‘ï¼Œæ„å»ºç»“æœå¯ä»¥åœ¨ <a class=link href=https://github.com/ExplosionEngine/Explosion/actions target=_blank rel=noopener>Actions</a> æŸ¥è¯¢ï¼š</p><p><figure style=flex-grow:128;flex-basis:307px><a href=/post/40/2.png data-size=1314x1025><img src=/post/40/2.png srcset="/post/40/2_hu943882e654f15d85ad288fba56519395_221393_480x0_resize_box_3.png 480w, /post/40/2_hu943882e654f15d85ad288fba56519395_221393_1024x0_resize_box_3.png 1024w" width=1314 height=1025 loading=lazy alt="Action Result"></a><figcaption>Action Result</figcaption></figure></p><p>æ„å»ºé€šè¿‡æ˜¯åˆå…¥çš„ç¡¬æ€§æŒ‡æ ‡ã€‚å…¶å®æˆ‘åœ¨çº ç»“ MacOS è¦ä¸è¦åŠ ï¼Œå› ä¸ºå®é™…ä¸Šä»æ„å»ºæ¥è¯´ï¼ŒMacOS çš„ç¼–è¯‘å™¨å’Œ GCC è¿˜æ˜¯æ¯”è¾ƒä¸€è‡´çš„ï¼Œä¸€èˆ¬ä¸ä¼šå‡ºä»€ä¹ˆå¤§å²”å­ï¼Œåé¢å†è¯´å§ã€‚</p><h2 id=æ„å»ºç³»ç»Ÿä¼˜åŒ–>æ„å»ºç³»ç»Ÿä¼˜åŒ–</h2><p>æˆ‘æŠ½ç©ºå¯¹æ‰€æœ‰çš„ CMake è¿›è¡Œäº†ä¸€æ¬¡é‡æ„ï¼Œä¸»è¦åšçš„äº‹æƒ…æ˜¯æŠŠå¸¸ç”¨çš„ä¸€äº›åŸºæœ¬ CMake æŒ‡ä»¤åšäº†ä¸€æ¬¡å°è£…ï¼Œä¸»è¦æ¶‰åŠï¼š</p><ul><li>add_executable</li><li>add_library</li><li>add_test</li></ul><p>æˆ‘æŠŠä»–ä»¬å°è£…æˆäº†ï¼š</p><ul><li>exp_add_executable</li><li>exp_add_library</li><li>exp_add_test</li></ul><p>å…¶å®åšçš„äº‹æƒ…å¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨åŸæœ‰æŒ‡ä»¤çš„åŸºç¡€ä¸Šï¼ŒæŠŠå¤´æ–‡ä»¶ç›®å½•ã€é“¾æ¥åº“è¿™ç±»å¿…å¤‡çš„æ“ä½œä¸å…¶åˆå¹¶äº†ï¼Œç”¨èµ·æ¥ä¼šæ›´æ–¹ä¾¿äº›ï¼Œä¸‹é¢æ˜¯ä¸€æ®µç¤ºä¾‹ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cmake data-lang=cmake><span class=line><span class=cl><span class=nb>exp_add_executable</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>NAME</span> <span class=o>${</span><span class=nv>TARGET_NAME</span><span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=s>SRCS</span> <span class=o>${</span><span class=nv>TARGET_SOURCES</span><span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=s>INC_DIRS</span> <span class=o>${</span><span class=nv>TARGET_INCLUDE_DIRS</span><span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=s>LIBS</span> <span class=o>${</span><span class=nv>TARGET_LIBS</span><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nb>exp_add_library</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>NAME</span> <span class=o>${</span><span class=nv>TARGET_NAME</span><span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=s>TYPE</span> <span class=o>${</span><span class=nv>TARGET_TYPE</span><span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=s>SRCS</span> <span class=o>${</span><span class=nv>TARGET_SOURCES</span><span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=s>PRIVATE_INC_DIRS</span> <span class=o>${</span><span class=nv>TARGET_PRIVATE_INCLUDE_DIRS</span><span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=s>PUBLIC_INC_DIRS</span> <span class=o>${</span><span class=nv>TARGET_PUBLIC_INCLUDE_DIRS</span><span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=s>LIB</span> <span class=o>${</span><span class=nv>TARGET_LIBS</span><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span><span class=err>
</span></span></span><span class=line><span class=cl><span class=err>
</span></span></span><span class=line><span class=cl><span class=err></span><span class=nb>exp_add_test</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>NAME</span> <span class=o>${</span><span class=nv>TARGET_NAME</span><span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=s>WORKING_DIR</span> <span class=o>${</span><span class=nv>TARGET_WORKING_DIR</span><span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=s>SRCS</span> <span class=o>${</span><span class=nv>TARGET_SOURCES</span><span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=s>INC_DIRS</span> <span class=o>${</span><span class=nv>TARGET_INCLUDE_DIRS</span><span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=s>LIB</span> <span class=o>${</span><span class=nv>TARGET_LIBS</span><span class=o>}</span>
</span></span><span class=line><span class=cl><span class=p>)</span><span class=err>
</span></span></span></code></pre></div><p>ç›®çš„å°±æ˜¯ç»Ÿä¸€å¤§å®¶å†™ CMake çš„é£æ ¼ã€‚</p><h2 id=ä»£ç è´¨é‡æ§åˆ¶>ä»£ç è´¨é‡æ§åˆ¶</h2><p>ç»è¿‡ä¸€ç•ªè€ƒé‡ï¼Œæˆ‘æš‚æ—¶é€‰ç”¨äº† <a class=link href=https://www.codacy.com/ target=_blank rel=noopener>Codacy</a> ä½œä¸ºæˆ‘ä»¬çš„é™æ€æ£€æŸ¥å·¥å…·ï¼Œå› ä¸ºæ˜¯çº¯åœ¨çº¿çš„å·¥å…·ï¼Œå®Œå…¨ä¸éœ€è¦é›†æˆï¼Œåªéœ€è¦æŒ‰æ­¥éª¤å¯ç”¨ GitHub App å³å¯å¯ç”¨æ‰«æï¼Œå¯ä»¥åœ¨ <a class=link href=https://app.codacy.com/gh/ExplosionEngine/Explosion/dashboard target=_blank rel=noopener>Codacy Dashboard - Explosion</a> æ‰¾åˆ°é™æ€æ‰«æç»“æœï¼š</p><p><figure style=flex-grow:146;flex-basis:351px><a href=/post/40/5.png data-size=1695x1158><img src=/post/40/5.png srcset="/post/40/5_hu02ad30fe28b8eede46e408fff7a03b13_168185_480x0_resize_box_3.png 480w, /post/40/5_hu02ad30fe28b8eede46e408fff7a03b13_168185_1024x0_resize_box_3.png 1024w" width=1695 height=1158 loading=lazy alt="Codacy Dashboard"></a><figcaption>Codacy Dashboard</figcaption></figure></p><p>ä¸»å¹²çš„ä»£ç æäº¤ä»¥åŠ MR ä¼šè‡ªåŠ¨è§¦å‘é™æ€æ‰«æï¼Œä¹‹åè¯„çº§ä¼šè‡ªåŠ¨åˆ·æ–°ï¼Œç„¶ååŒæ­¥åˆ° README çš„ Badge ä¸­ï¼š</p><p><figure style=flex-grow:256;flex-basis:616px><a href=/post/40/6.png data-size=884x344><img src=/post/40/6.png srcset="/post/40/6_hu228af9f4b45c2189636432856def1232_48250_480x0_resize_box_3.png 480w, /post/40/6_hu228af9f4b45c2189636432856def1232_48250_1024x0_resize_box_3.png 1024w" width=884 height=344 loading=lazy alt="Codacy Badge"></a><figcaption>Codacy Badge</figcaption></figure></p><p>è‡³äºä»£ç é£æ ¼ã€å®‰å…¨é—®é¢˜ã€åœˆå¤æ‚åº¦ã€é‡å¤ç‡çš„æ‰«æè¦ä¸è¦æ•´åˆåˆ° CI ä¸­ï¼Œä¹‹åå†è€ƒè™‘å§ï¼Œç°åœ¨æ¥è¯´å·²ç»å¤Ÿç”¨äº†~</p><h2 id=rhi-é‡æ„>RHI é‡æ„</h2><p>æœ€è¿‘æŠ•å…¥ Explosion çš„æ—¶é—´å¹¶ä¸æ˜¯å¾ˆå¤šï¼ŒRHI é‡æ„ç®—æ˜¯æœ€è¿‘çš„ä¸»è¦è¿›å±•äº†ï¼Œæˆ‘ä¹‹å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« å«åš <a class=link href=https://flyandnotdown.github.io/post/39/ target=_blank rel=noopener>ã€Šé†’é†’å§ï¼Œé™æ€å¤šæ€æ ¹æœ¬æ²¡æœ‰è¿™ä¹ˆé¦™ã€‹</a>ï¼Œå…¶å®ä¸»è¦çº ç»“çš„åœ°æ–¹åœ¨äºè¦ä¸è¦è¿½æ±‚æé™æ€§èƒ½ï¼ŒæŠŠ RHI çš„ä¸»è¦æ¶å­å®Œå…¨ç”¨æ¨¡æ¿å®ç°ï¼Œä½†æˆ‘æœ€åè¿˜æ˜¯æ”¾å¼ƒäº†ã€‚</p><p>æ¨¡æ¿åœ¨å¤§å‹çš„æ¶æ„è®¾è®¡ä¸ä»£ç é‡çº§ä¸‹ä¼šå¸¦æ¥å¾ˆå¤šè´Ÿé¢å½±å“ï¼Œä¸»è¦ä¼šç›´æ¥å½±å“åˆ°æ¥å£çš„è®¾è®¡ï¼Œè™½ç„¶æ€§èƒ½é«˜ï¼Œä½†æˆ‘æœ€åè¿˜æ˜¯å†³å®šä½¿ç”¨ä¼ ç»Ÿçš„ OOP æ¥å®Œæˆ RHI çš„ç¼–å†™ã€‚</p><p>æŠ›å¼€è¿™äº›ï¼Œæˆ‘æ€»ç®—æ˜¯å†³å®šå…ˆæŠŠ VulkanDriver æ‹†åˆ†å‡ºæ¥äº†ï¼ŒæŠ½è±¡äº†ä¸€å¥—å…¬å…±çš„ Driver æ¥å£ï¼Œç”¨äºä»¥åå®ç° DX12 å’Œ Metal åç«¯ï¼Œæˆ‘å¾ˆåº†å¹¸å…ˆåšäº†è¿™ä»¶äº‹ï¼Œä¸ç„¶åé¢æ”¹èµ·æ¥ä¼°è®¡æ›´è›‹ç–¼ã€‚</p><p>ç›®å‰å°è£…çš„ç±»æœ‰ï¼š</p><ul><li>Driver</li><li>Device</li><li>CommandBuffer</li><li>Buffer</li><li>Sampler</li><li>Image</li><li>ImageView</li><li>FrameBuffer</li><li>SwapChain</li><li>RenderPass</li><li>GraphicsPipeline</li><li>ComputePipeline</li><li>DescriptorPool</li><li>DescriptorSet</li><li>Signal</li></ul><p>å°è£…ç²’åº¦è¿˜æ˜¯ç›¸å¯¹æ¯”è¾ƒç»†çš„ï¼Œä¹‹åå‡†å¤‡é€šè¿‡è„šæœ¬ / æ’ä»¶çš„å½¢å¼å°† RHI å’Œ RPI ä¸€èµ·æä¾›å‡ºå»ï¼Œä¸ºç”¨æˆ·è‡ªå·±é€  Renderer æä¾›å¯èƒ½æ€§ï¼ˆå’±ä»¬ä¹‹åçš„ DefaultRenderer æœ¬èº«å°±ä¼šä½œä¸ºä¸€ä¸ªæ’ä»¶æä¾›ï¼‰ã€‚</p><p>RHI è¦èµ°çš„è·¯è¿˜å¾ˆé•¿ï¼Œä¸è¿‡æˆ‘æ‰“ç®—å°æ­¥å¿«è·‘ï¼Œå…ˆç”¨ VulkanDriver é¡¶ç€ï¼Œæ…¢æ…¢æŠŠä¸Šé¢çš„ä»£ç ä¹Ÿå†™èµ·æ¥ï¼Œè®©å…¶ä»–å›¢é˜Ÿæˆå‘˜ä¹Ÿèƒ½å¿«é€Ÿåœ°å‚ä¸è¿›æ¥ã€‚</p><h2 id=rpi--framegraph>RPI / FrameGraph</h2><p>RPI / FrameGraph ä¸»è¦ç”± <a class=link href=https://github.com/bluesky013 target=_blank rel=noopener>bluesky013</a> æ“åˆ€ï¼Œæ€è·¯ä¸»è¦å‚è€ƒ GDC 2017 å¯’éœœå¼•æ“çš„ä¸€æ¬¡ Talkï¼Œå¯ä»¥åœ¨ <a class=link href=https://www.gdcvault.com/play/1024612/FrameGraph-Extensible-Rendering-Architecture-in target=_blank rel=noopener>GDC Vault - FrameGraph</a> æ‰¾åˆ°è¿™æ¬¡ Talk çš„ PPTã€‚</p><p>æˆ‘ä»¬è®¾è®¡çš„è“æœ¬å°±æ˜¯è¿™ä¸ª Talkï¼Œç›®å‰é€»è¾‘å·®ä¸å¤šå†™å®Œäº†ï¼Œä¸è¿‡ AsyncComputePass å’Œ TransitionResources å¤„ç†ä¸Šè¿˜æœ‰ç‚¹å°é—®é¢˜ã€‚</p><p>ä¸‹é¢ç®€å•è®²è®² FrameGraphï¼š</p><p><figure style=flex-grow:178;flex-basis:428px><a href=/post/40/7.png data-size=987x553><img src=/post/40/7.png srcset="/post/40/7_huc330f5e164c69c996e14feb6539f424c_561031_480x0_resize_box_3.png 480w, /post/40/7_huc330f5e164c69c996e14feb6539f424c_561031_1024x0_resize_box_3.png 1024w" width=987 height=553 loading=lazy alt="FrameGraph Goals"></a><figcaption>FrameGraph Goals</figcaption></figure></p><p>FrameGraph çš„ç›®æ ‡å¾ˆç®€å•ï¼Œå°±æ˜¯ç”¨ä¸€ç§åˆç†ã€å¯é¢„æµ‹çš„æ–¹å¼å»ç»´æŠ¤ Renderer ä¸­ç¹é‡ä¸å ªçš„èµ„æºä¸ RenderPass çš„ä¾èµ–å…³ç³»ã€‚ä»å¦å¤–ä¸€ç§è§’åº¦è®²ï¼ŒFrameGraph çš„ä½œç”¨æ˜¯è®©æ¸²æŸ“æµç¨‹æ›´æ¸…æ™°ã€å¯ç»´æŠ¤ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p><p><figure style=flex-grow:178;flex-basis:429px><a href=/post/40/8.png data-size=996x557><img src=/post/40/8.png srcset="/post/40/8_hue4fba2b2479aff60ca43ffb224603f8b_540229_480x0_resize_box_3.png 480w, /post/40/8_hue4fba2b2479aff60ca43ffb224603f8b_540229_1024x0_resize_box_3.png 1024w" width=996 height=557 loading=lazy alt="FramGraph Example"></a><figcaption>FramGraph Example</figcaption></figure></p><p>é»„è‰²çš„èŠ‚ç‚¹æ˜¯ RenderPassï¼Œè“è‰²çš„èŠ‚ç‚¹æ˜¯èµ„æºï¼Œçº¢è‰²èŠ‚ç‚¹æ˜¯é€æ˜¾ï¼Œå®ƒå¾ˆå¥½åœ°æè¿°äº†ä¸€å¸§ä¸­èµ„æºå’Œæ¸²æŸ“æµç¨‹çš„å…³ç³»ï¼ˆä½†æ˜¯è¦æ³¨æ„çš„æ˜¯å®ƒå¹¶ä¸ç»´æŠ¤å…·ä½“çš„æ¸²æŸ“ä»»åŠ¡ï¼Œä¹Ÿå°±æ˜¯å®ƒä¸ç®¡ Pipelineï¼‰ã€‚ä¸‹é¢æ˜¯å‡ å¼ èµ„æºå’Œ RenderPass çš„å›¾ï¼š</p><p><figure style=flex-grow:178;flex-basis:427px><a href=/post/40/9.png data-size=927x520><img src=/post/40/9.png srcset="/post/40/9_huc2758c5f8784421a5131dd4242d8b055_208769_480x0_resize_box_3.png 480w, /post/40/9_huc2758c5f8784421a5131dd4242d8b055_208769_1024x0_resize_box_3.png 1024w" width=927 height=520 loading=lazy alt="FrameGraph Resources"></a><figcaption>FrameGraph Resources</figcaption></figure></p><p><figure style=flex-grow:178;flex-basis:427px><a href=/post/40/10.png data-size=930x522><img src=/post/40/10.png srcset="/post/40/10_hu516fc7a0940c58550b830fa2c8b624e8_224783_480x0_resize_box_3.png 480w, /post/40/10_hu516fc7a0940c58550b830fa2c8b624e8_224783_1024x0_resize_box_3.png 1024w" width=930 height=522 loading=lazy alt="FrameGraph Examples"></a><figcaption>FrameGraph Examples</figcaption></figure></p><p><figure style=flex-grow:178;flex-basis:428px><a href=/post/40/11.png data-size=931x522><img src=/post/40/11.png srcset="/post/40/11_hu525c911a4e995de71482783026d39910_223045_480x0_resize_box_3.png 480w, /post/40/11_hu525c911a4e995de71482783026d39910_223045_1024x0_resize_box_3.png 1024w" width=931 height=522 loading=lazy alt="FrameGraph SetUp"></a><figcaption>FrameGraph SetUp</figcaption></figure></p><p><figure style=flex-grow:178;flex-basis:429px><a href=/post/40/12.png data-size=929x519><img src=/post/40/12.png srcset="/post/40/12_hu38022051c21edc0d9627731a98c46dc6_287057_480x0_resize_box_3.png 480w, /post/40/12_hu38022051c21edc0d9627731a98c46dc6_287057_1024x0_resize_box_3.png 1024w" width=929 height=519 loading=lazy alt="FrameGraph RenderPass"></a><figcaption>FrameGraph RenderPass</figcaption></figure></p><p>èµ„æºè¿™é‡Œå°±ä¸å¤šè¯´äº†ï¼Œå¯ä»¥è‡ªå·±çœ‹çœ‹åŸ Talkï¼Œä¸»è¦æ˜¯ RenderPassï¼ŒFrameGraph ç”¨ä¸€ä¸ªç»“æ„ä½“æ¥æè¿° RenderPass èŠ‚ç‚¹çš„è¾“å…¥è¾“å‡ºèµ„æºï¼Œç”¨ä¸¤ä¸ª Lambda è¡¨è¾¾å¼æ¥æè¿° RenderPass èŠ‚ç‚¹çš„ SetUp å’Œ Execute æµç¨‹ï¼Œè¿™é‡Œçš„ Execute å®é™…ä¸Šå°±æ˜¯çœŸæ­£çš„ç»˜åˆ¶è¿‡ç¨‹äº†ï¼ŒFrameGraph å’Œ RHI å°±æ˜¯åœ¨è¿™é‡Œç»“åˆçš„ã€‚</p><p>FrameGraph æ˜¯ RPI çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œå¯ä»¥è¯´å®ƒæ˜¯ Renderer çš„éª¨æ¶ï¼Œè€Œ RHI åˆ™æ˜¯ Renderer çš„è¡€è‚‰ï¼Œå®ƒä¿©é…åˆå¯ä»¥ä¸ºå¯ç¼–ç¨‹æ¸²æŸ“ç®¡çº¿æä¾›å¼ºå¤§çš„æ”¯æŒã€‚</p><h1 id=æ€è€ƒ>æ€è€ƒ</h1><h2 id=åå°„ç³»ç»Ÿæ­å»º>åå°„ç³»ç»Ÿæ­å»º</h2><p>æˆ‘å¾ˆå–œæ¬¢æ‹¿åå°„ç³»ç»Ÿè¯´äº‹ï¼Œä¹‹å‰ä¹Ÿå†™è¿‡ <a class=link href=https://flyandnotdown.github.io/post/33/ target=_blank rel=noopener>ä¸€ç¯‡å¯¹åå°„ç³»ç»Ÿçš„å‰–æ</a>ï¼Œä¸è¿‡é‚£æ˜¯é’ˆå¯¹ UnrealEngine çš„ã€‚åå°„ç³»ç»Ÿåœ¨æ¸¸æˆå¼•æ“ä¸­æœ€å¤§çš„ä½œç”¨ï¼Œæ— éå°±ä¸¤ä¸ªï¼š</p><ul><li>è‡ªåŠ¨åºåˆ—åŒ–</li><li>è„šæœ¬ç¬¦å·æ³¨å†Œ</li></ul><p>æˆ‘ä»¬ç›®å‰å‡†å¤‡ä½¿ç”¨ <a class=link href=https://github.com/rttrorg/rttr target=_blank rel=noopener>rttr</a> æˆ–è€… <a class=link href=https://github.com/skypjack/meta target=_blank rel=noopener>meta</a>ï¼Œrttr åº”è¯¥ä¸è¯´æˆ‘å¤šè¯´äº†ï¼Œè€ç‰Œåå°„æ¡†æ¶äº†ï¼Œmeta æ˜¯ entt å†…ç½®çš„åå°„æ¡†æ¶ï¼Œä½œè€… skypjack è§‰å¾—å¸‚é¢ä¸Šæ²¡ä»€ä¹ˆå¥½çš„åå°„æ¡†æ¶ç„¶åè‡ªå·±å†™çš„ã€‚å…¶å®ä»å·¥ç¨‹å»ºè®¾è§’åº¦çœ‹æˆ‘æ›´è®¤å¯ meta ä¸€äº›ï¼Œä½†æ˜¯ meta æä¾›çš„æ¥å£å®åœ¨æ˜¯ä¸å¥½ç”¨ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=n>std</span><span class=o>::</span><span class=n>hash</span><span class=o>&lt;</span><span class=n>std</span><span class=o>::</span><span class=n>string_view</span><span class=o>&gt;</span> <span class=n>hash</span><span class=p>{};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>meta</span><span class=o>::</span><span class=n>reflect</span><span class=o>&lt;</span><span class=n>my_type</span><span class=o>&gt;</span><span class=p>(</span><span class=n>hash</span><span class=p>(</span><span class=s>&#34;reflected&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=n>data</span><span class=o>&lt;&amp;</span><span class=n>my_type</span><span class=o>::</span><span class=n>static_variable</span><span class=o>&gt;</span><span class=p>(</span><span class=n>hash</span><span class=p>(</span><span class=s>&#34;static&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=n>data</span><span class=o>&lt;&amp;</span><span class=n>my_type</span><span class=o>::</span><span class=n>data_member</span><span class=o>&gt;</span><span class=p>(</span><span class=n>hash</span><span class=p>(</span><span class=s>&#34;member&#34;</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=n>data</span><span class=o>&lt;&amp;</span><span class=n>global_variable</span><span class=o>&gt;</span><span class=p>(</span><span class=n>hash</span><span class=p>(</span><span class=s>&#34;global&#34;</span><span class=p>));</span>
</span></span></code></pre></div><p>ä»–è¿™é‡Œçš„å†™æ³•éå¸¸å·§å¦™ï¼Œç”¨åœ°å€ï¼ˆåœ°å€æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ª uint32_t æˆ–è€… uint64_tï¼‰æ¥ä½œä¸ºæ¨¡æ¿å‚æ•°ï¼Œæˆ‘ç¬¬ä¸€å¼€å§‹æ„£æ˜¯æ²¡çœ‹æ‡‚è¿™å†™æ³•ï¼Œä¸è¿‡ä»”ç»†è¯»ä¸€è¯»è¿˜å¥½ï¼Œç›¸å½“äºä¸€å£æ°”å®Œæˆäº†åœ°å€ä¸ç±»å‹çš„åŒé‡æ³¨å†Œï¼Œä¸è¿‡æˆ‘æƒ³è¯Ÿç—…çš„åœ°æ–¹åœ¨äºä½œè€…ä¸ºäº†è¿½æ±‚æé™æ€§èƒ½ï¼Œè¿ identity å‚æ•°éƒ½ç”¨äº† hash + string_viewï¼Œå°±ç¦»è°± &mldr;&mldr;</p><p>å¦‚æœæˆ‘ä»¬æœ€ç»ˆä½¿ç”¨ meta çš„è¯ï¼Œè¿˜æ˜¯è¦å†å°è£…ä¸€å±‚ã€‚rttr çš„è¯ï¼Œæ¥å£æ˜¯æ¯”è¾ƒå¥½ç”¨çš„ï¼Œä½†æˆ‘æ¥å—ä¸äº†çš„æ˜¯ rttr çš„å·¥ç¨‹ç«Ÿç„¶ç”¨ cmake å»æ£€æŸ¥ README å’Œ LICENSE ç¬¦ä¸ç¬¦åˆå®ƒçš„è¦æ±‚ &mldr;&mldr;</p><p>å…·ä½“ä½¿ç”¨å“ªä¸ªå†™åˆ°åå°„ç³»ç»Ÿçš„æ—¶å€™å†æŒ‘é€‰å§ï¼Œå®åœ¨ä¸è¡Œè‡ªå·±å†™ä¸€ä¸ªä¹Ÿä¸æ˜¯ä»€ä¹ˆéº»çƒ¦äº‹ï¼Œ<strong>æˆ‘æ˜¯æ¯”è¾ƒå€¾å‘äºé™æ€åå°„çš„</strong>ï¼Œè€Œ UE çš„åå°„ç³»ç»Ÿæ˜¯åŠ¨æ€åå°„ï¼Œå®ç°èµ·æ¥è¿˜ç¨å¾®æœ‰äº›åŒºåˆ«ï¼Œæ€§èƒ½ä¸Šä¹Ÿè¦å·®ä¸€æˆªï¼Œä¼˜ç‚¹å°±æ˜¯<strong>åŠ¨æ€åå°„å¯¹è„šæœ¬å¾ˆå‹å¥½</strong>ï¼Œçœ‹å®Œä¸‹ä¸€å°èŠ‚ä½ å°±çŸ¥é“æˆ‘è¯´çš„æ˜¯ä»€ä¹ˆäº†ã€‚</p><h2 id=è„šæœ¬å¦‚ä½•ä¸-ecs-èåˆå‘¢>è„šæœ¬å¦‚ä½•ä¸ ECS èåˆå‘¢ï¼Ÿ</h2><p>å…¶å®æˆ‘æ—©å°±è¯´äº†ï¼Œå¼•æ“æœ¬èº«æŒ‰ç…§ ECS é€»è¾‘ç¼–å†™å¹¶ä¸ä»£è¡¨è„šæœ¬ä¹Ÿè¦å¥— ECSã€‚å¦‚æœæ˜¯ä»å¤´åˆ°å°¾éƒ½ç”¨ ECS çš„è¯ï¼Œé‚£ä¹ˆç”¨æˆ·å¿…é¡»è¦æ¥å—çš„æ˜¯æ”¹å˜ä»¥å‰å†™ GameObject çš„é£æ ¼ï¼ŒæŠ•å…¥ç¼–å†™ Component å’Œ System çš„æ€€æŠ±ã€‚</p><p>è®¾æƒ³åå°„ç³»ç»Ÿæœ€åæ˜¯ç”¨çº¯é™æ€åå°„ï¼ŒECS ä¹Ÿåœ¨ C++ å±‚å¼€å§‹æ„å»ºï¼Œè„šæœ¬å®Œå…¨ ECS åŒ–ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±é¿ä¸å¼€ä¸€ä¸ªå¤§é—®é¢˜ â€”â€” <strong>â€œç”¨æˆ·è‡ªå®šä¹‰çš„ Component è¦æ€ä¹ˆè¢«ä¸‹é¢ C++ æ‰€æ„ŸçŸ¥åˆ°ï¼Ÿâ€</strong></p><p>å‡è®¾ç”¨æˆ·åœ¨è„šæœ¬é‡Œé¢å®šä¹‰äº†ä¸€ä¸ª Component å’Œä¸€ä¸ª Systemï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=kr>const</span> <span class=nx>helloComp</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>a</span><span class=o>:</span> <span class=mi>1</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>b</span><span class=o>:</span> <span class=mi>2</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>c</span><span class=o>:</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>helloSystem</span> <span class=o>=</span> <span class=p>(</span><span class=nx>registry</span><span class=p>,</span> <span class=nx>time</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=c1>// systen logic
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>};</span>
</span></span></code></pre></div><p>è¿™é‡Œç”¨æˆ·è‡ªå®šä¹‰çš„ HelloComp å¯¹åº”çš„ C++ çš„ Archetype å¾ˆæ˜æ˜¾æ˜¯ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=k>struct</span> <span class=nc>HelloComp</span> <span class=o>:</span> <span class=k>public</span> <span class=n>Comp</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>c</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>ä½†ä¸å·§çš„æ˜¯è„šæœ¬æ˜¯å¼±ç±»å‹çš„ï¼ŒC++ æ ¹æœ¬å°±æ²¡åŠæ³•æ„ŸçŸ¥åˆ°ç±»å‹å¥½å˜›ï¼Ÿé‚£å®é™…ä¸Šå¡«å……æ•°æ®çš„æ—¶å€™ï¼Œentt å¯æ˜¯éœ€è¦è¿™æ ·çš„ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=n>entt</span><span class=o>::</span><span class=n>registry</span> <span class=n>registry</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>const</span> <span class=k>auto</span> <span class=n>entity</span> <span class=o>=</span> <span class=n>registry</span><span class=p>.</span><span class=n>create</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=n>registry</span><span class=p>.</span><span class=n>emplace</span><span class=o>&lt;</span><span class=n>HelloComp</span><span class=o>&gt;</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>);</span>
</span></span></code></pre></div><p>è¿™é‡Œçš„æ¨¡æ¿å‚æ•°æ ¹æœ¬å°±æ²¡æ³•å¡« &mldr;&mldr;</p><p>æˆ‘å’Œ <a class=link href=https://github.com/bluesky013 target=_blank rel=noopener>bluesky013</a> è®¨è®ºåï¼Œæˆ‘ä»¬ä¸€èµ·å¾—åˆ°ä¸€ä¸ªå¯è¡Œçš„æ–¹æ¡ˆï¼Œå°±æ˜¯ç”¨æˆ·å°† Component å’Œ System åˆ†å¼€ä¸ºä¸¤ä¸ªæ–‡ä»¶ç¼–å†™ï¼ŒSystem éƒ¨åˆ†ä¸åŠ¨ï¼ŒComponent éƒ¨åˆ†ä¿®æ”¹æˆä¸‹é¢è¿™æ ·ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=c1>// hello.comp.js
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=kr>export</span> <span class=kr>const</span> <span class=nx>entry</span> <span class=o>=</span> <span class=p>(</span><span class=nx>componentManager</span><span class=p>)</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>componentManager</span><span class=p>.</span><span class=nx>define</span><span class=p>({</span>
</span></span><span class=line><span class=cl>        <span class=nx>name</span><span class=o>:</span> <span class=s2>&#34;Hello&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nx>attrs</span><span class=o>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=nx>a</span><span class=o>:</span> <span class=nx>DataType</span><span class=p>.</span><span class=nx>Int</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>b</span><span class=o>:</span> <span class=nx>DataType</span><span class=p>.</span><span class=nx>Int</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=nx>c</span><span class=o>:</span> <span class=nx>DataType</span><span class=p>.</span><span class=nx>Int</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><p>ç„¶åæˆ‘ä»¬éœ€è¦<strong>ç»è¿‡ä¸€è½®é¢„ç¼–è¯‘</strong>ï¼Œæˆ‘ä»¬çš„é¢„ç¼–è¯‘å™¨ä¼šæ‰§è¡Œæ‰€æœ‰çš„ .comp.js æ–‡ä»¶ï¼Œç„¶åæ‰¾åˆ° entry æ–¹æ³•è¿›è¡Œè°ƒç”¨ï¼Œæ‰§è¡Œå®Œæ‰€æœ‰ç±»å‹çš„æ³¨å†Œä¹‹åï¼Œé¢„ç¼–è¯‘æœŸä¼šä» componentManager ä¸­å–å‡ºæ‰€æœ‰çš„ Component ç±»å‹ä¿¡æ¯ï¼Œç”Ÿæˆä¸€ç³»åˆ—å¤´æ–‡ä»¶å’Œä»£ç </p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=c1>// hello.generated.h
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>struct</span> <span class=nc>Hello</span> <span class=o>:</span> <span class=k>public</span> <span class=n>Comp</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>a</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>b</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>c</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// hello.generated.cpp
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>extern</span> <span class=s>&#34;C&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>RegisterComp</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=c1>// ä¸€äº›åˆå§‹åŒ–çš„äº‹æƒ…ï¼Œä¼šåœ¨åº“è¢«åŠ è½½æ—¶è¢«è‡ªåŠ¨æ‰§è¡Œ
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>è¿™æ ·å°±èƒ½è®©è„šæœ¬ç³»ç»Ÿé‡Œé¢å®šä¹‰çš„ç±»å‹ä¹Ÿè¢« C++ æ„ŸçŸ¥åˆ°äº†ï¼Œè¿™ä¸ªæ€è·¯å…¶å®å’Œ QTã€UE å¾ˆæƒ³ï¼Œåªä¸è¿‡ä»–ä»¬æ˜¯å¯¹ C++ è¿›è¡Œå…ƒç¼–è¯‘ï¼Œæˆ‘ä»¬æ˜¯å¯¹è„šæœ¬è¯­è¨€è€Œå·²~</p><h2 id=è„šæœ¬è¯­è¨€å’Œå¼•æ“çš„é€‰æ‹©>è„šæœ¬è¯­è¨€å’Œå¼•æ“çš„é€‰æ‹©</h2><p>æˆ‘æ˜¯ç‹‚çƒ­çš„ JavaScript çˆ±å¥½è€…ï¼Œæ‰€ä»¥ Explosion çš„è„šæœ¬è¯­è¨€å½“ç„¶è¦ä½¿ç”¨ JavaScript å•¦~</p><p>å…œäº†ä¸€åœˆæˆ‘çœ‹äº†å¾ˆå¤šå°å‹åµŒå…¥å¼ JavaScript å¼•æ“ï¼Œä¸è¿‡è¯´å®è¯è´¨é‡éƒ½ä¸€èˆ¬èˆ¬ï¼ŒæŒ£æ‰äº†ä¸€æ³¢åæˆ‘è¿˜æ˜¯å‡†å¤‡æŠŠè¿™ä¸ªå¤§å®¶ä¼™ç»™å¸¦è¿›æ¥ï¼š<a class=link href=https://v8.dev/ target=_blank rel=noopener>V8</a></p><p>ç»è¿‡è¿™æ³¢è°ƒç ”æˆ‘æ‰å‘ç°ï¼ŒæœçœŸ V8 å‡ºæ¥éƒ½æ²¡äººæ•¢åš JavaScript å¼•æ“äº†ï¼Œå®ƒçš„ç»Ÿæ²»åœ°ä½çœŸæ²¡å•¥å¥½è¯´çš„ &mldr;&mldr;</p><p>ç®€å•çœ‹äº†ä¸€ä¸‹é›†æˆæŒ‡å— â€”â€” <a class=link href=https://v8.dev/docs/embed target=_blank rel=noopener>Getting started with embedding V8</a>ï¼Œå®˜æ–¹ä¾‹å­å¦‚ä¸‹ï¼š</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=c1>// Copyright 2015 the V8 project authors. All rights reserved.
</span></span></span><span class=line><span class=cl><span class=c1>// Use of this source code is governed by a BSD-style license that can be
</span></span></span><span class=line><span class=cl><span class=c1>// found in the LICENSE file.
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdlib.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;string.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;include/libplatform/libplatform.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;include/v8.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=kt>int</span> <span class=nf>main</span><span class=p>(</span><span class=kt>int</span> <span class=n>argc</span><span class=p>,</span> <span class=kt>char</span><span class=o>*</span> <span class=n>argv</span><span class=p>[])</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Initialize V8.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>v8</span><span class=o>::</span><span class=n>V8</span><span class=o>::</span><span class=n>InitializeICUDefaultLocation</span><span class=p>(</span><span class=n>argv</span><span class=p>[</span><span class=mi>0</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>  <span class=n>v8</span><span class=o>::</span><span class=n>V8</span><span class=o>::</span><span class=n>InitializeExternalStartupData</span><span class=p>(</span><span class=n>argv</span><span class=p>[</span><span class=mi>0</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>  <span class=n>std</span><span class=o>::</span><span class=n>unique_ptr</span><span class=o>&lt;</span><span class=n>v8</span><span class=o>::</span><span class=n>Platform</span><span class=o>&gt;</span> <span class=n>platform</span> <span class=o>=</span> <span class=n>v8</span><span class=o>::</span><span class=n>platform</span><span class=o>::</span><span class=n>NewDefaultPlatform</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=n>v8</span><span class=o>::</span><span class=n>V8</span><span class=o>::</span><span class=n>InitializePlatform</span><span class=p>(</span><span class=n>platform</span><span class=p>.</span><span class=n>get</span><span class=p>());</span>
</span></span><span class=line><span class=cl>  <span class=n>v8</span><span class=o>::</span><span class=n>V8</span><span class=o>::</span><span class=n>Initialize</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Create a new Isolate and make it the current one.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>v8</span><span class=o>::</span><span class=n>Isolate</span><span class=o>::</span><span class=n>CreateParams</span> <span class=n>create_params</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=n>create_params</span><span class=p>.</span><span class=n>array_buffer_allocator</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>      <span class=n>v8</span><span class=o>::</span><span class=n>ArrayBuffer</span><span class=o>::</span><span class=n>Allocator</span><span class=o>::</span><span class=n>NewDefaultAllocator</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=n>v8</span><span class=o>::</span><span class=n>Isolate</span><span class=o>*</span> <span class=n>isolate</span> <span class=o>=</span> <span class=n>v8</span><span class=o>::</span><span class=n>Isolate</span><span class=o>::</span><span class=n>New</span><span class=p>(</span><span class=n>create_params</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>v8</span><span class=o>::</span><span class=n>Isolate</span><span class=o>::</span><span class=n>Scope</span> <span class=n>isolate_scope</span><span class=p>(</span><span class=n>isolate</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Create a stack-allocated handle scope.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>v8</span><span class=o>::</span><span class=n>HandleScope</span> <span class=n>handle_scope</span><span class=p>(</span><span class=n>isolate</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Create a new context.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>v8</span><span class=o>::</span><span class=n>Local</span><span class=o>&lt;</span><span class=n>v8</span><span class=o>::</span><span class=n>Context</span><span class=o>&gt;</span> <span class=n>context</span> <span class=o>=</span> <span class=n>v8</span><span class=o>::</span><span class=n>Context</span><span class=o>::</span><span class=n>New</span><span class=p>(</span><span class=n>isolate</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Enter the context for compiling and running the hello world script.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>v8</span><span class=o>::</span><span class=n>Context</span><span class=o>::</span><span class=n>Scope</span> <span class=n>context_scope</span><span class=p>(</span><span class=n>context</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Create a string containing the JavaScript source code.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>v8</span><span class=o>::</span><span class=n>Local</span><span class=o>&lt;</span><span class=n>v8</span><span class=o>::</span><span class=n>String</span><span class=o>&gt;</span> <span class=n>source</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=n>v8</span><span class=o>::</span><span class=n>String</span><span class=o>::</span><span class=n>NewFromUtf8</span><span class=p>(</span><span class=n>isolate</span><span class=p>,</span> <span class=s>&#34;&#39;Hello&#39; + &#39;, World!&#39;&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                                <span class=n>v8</span><span class=o>::</span><span class=n>NewStringType</span><span class=o>::</span><span class=n>kNormal</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>.</span><span class=n>ToLocalChecked</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Compile the source code.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>v8</span><span class=o>::</span><span class=n>Local</span><span class=o>&lt;</span><span class=n>v8</span><span class=o>::</span><span class=n>Script</span><span class=o>&gt;</span> <span class=n>script</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>        <span class=n>v8</span><span class=o>::</span><span class=n>Script</span><span class=o>::</span><span class=n>Compile</span><span class=p>(</span><span class=n>context</span><span class=p>,</span> <span class=n>source</span><span class=p>).</span><span class=n>ToLocalChecked</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Run the script to get the result.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>v8</span><span class=o>::</span><span class=n>Local</span><span class=o>&lt;</span><span class=n>v8</span><span class=o>::</span><span class=n>Value</span><span class=o>&gt;</span> <span class=n>result</span> <span class=o>=</span> <span class=n>script</span><span class=o>-&gt;</span><span class=n>Run</span><span class=p>(</span><span class=n>context</span><span class=p>).</span><span class=n>ToLocalChecked</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=c1>// Convert the result to an UTF8 string and print it.
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=n>v8</span><span class=o>::</span><span class=n>String</span><span class=o>::</span><span class=n>Utf8Value</span> <span class=n>utf8</span><span class=p>(</span><span class=n>isolate</span><span class=p>,</span> <span class=n>result</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>printf</span><span class=p>(</span><span class=s>&#34;%s</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=o>*</span><span class=n>utf8</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=c1>// Dispose the isolate and tear down V8.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=n>isolate</span><span class=o>-&gt;</span><span class=n>Dispose</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=n>v8</span><span class=o>::</span><span class=n>V8</span><span class=o>::</span><span class=n>Dispose</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=n>v8</span><span class=o>::</span><span class=n>V8</span><span class=o>::</span><span class=n>ShutdownPlatform</span><span class=p>();</span>
</span></span><span class=line><span class=cl>  <span class=k>delete</span> <span class=n>create_params</span><span class=p>.</span><span class=n>array_buffer_allocator</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>è¯´å®è¯å…¶å®å’Œ Lua å·®ä¸å¤šï¼Œåº”è¯¥éš¾åº¦ä¸é«˜ï¼Œä½†è¿˜æ˜¯è¦å…ˆè¯•è¯•ï¼Œä¸çŸ¥é“è¿™ä¹ˆå¤§ä½“é‡çš„æ€ªç‰©ä¼šä¸ä¼šæœ‰ä»€ä¹ˆå¤©å‘ &mldr;&mldr;</p><p>æœ€åï¼Œè¿˜æ˜¯è·Ÿè‡ªå·±å’Œ Explosion è¯´ä¸€å£°åŠ æ²¹~</p><h1 id=å‚è€ƒèµ„æ–™>å‚è€ƒèµ„æ–™</h1><ul><li><a class=link href=https://www.gdcvault.com/play/1024612/FrameGraph-Extensible-Rendering-Architecture-in target=_blank rel=noopener>GDC Vault - FrameGraph</a></li><li><a class=link href=https://github.com/rttrorg/rttr target=_blank rel=noopener>rttr</a></li><li><a class=link href=https://github.com/skypjack/entt target=_blank rel=noopener>EnTT</a></li><li><a class=link href=https://github.com/skypjack/meta target=_blank rel=noopener>meta</a></li><li><a class=link href=https://v8.dev/ target=_blank rel=noopener>V8 JavaScript Engine</a></li><li><a class=link href=https://chromium.googlesource.com/v8/v8/+/branch-heads/6.8/samples/hello-world.cc target=_blank rel=noopener>Embedded V8 Sample</a></li></ul></section><footer class=article-footer><section class=article-tags><a href=/tags/explosion/>Explosion</a>
<a href=/tags/game/>Game</a>
<a href=/tags/graphics/>Graphics</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-contents--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-contents><div class="flex article-list--tile"><article><a href=/post/44/><div class=article-details><h2 class=article-title>Explosion å¼€å‘ç¬”è®° (å››)</h2></div></a></article><article><a href=/post/37/><div class=article-details><h2 class=article-title>Explosion å¼€å‘ç¬”è®° (äºŒ)</h2></div></a></article><article><a href=/post/35/><div class=article-details><h2 class=article-title>Explosion å¼€å‘ç¬”è®° (ä¸€)</h2></div></a></article><article><a href=/post/34/><div class=article-details><h2 class=article-title>UnrealEngine4 æºç å‰–æ (äºŒ) åƒåœ¾å›æ”¶</h2></div></a></article><article><a href=/post/33/><div class=article-details><h2 class=article-title>UnrealEngine4 æºç å‰–æ (ä¸€) UObject æ¦‚è§ˆåŠåå°„ç³»ç»Ÿ</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo=FlyAndNotDown/KindemBlog issue-term=title crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>function setUtterancesTheme(e){let t=document.querySelector(".utterances iframe");t&&t.contentWindow.postMessage({type:"set-theme",theme:`github-${e}`},"https://utteranc.es")}addEventListener("message",e=>{if(e.origin!=="https://utteranc.es")return;setUtterancesTheme(document.body.dataset.scheme)}),window.addEventListener("onColorSchemeChange",e=>{setUtterancesTheme(e.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2017 -
2024 Kindemçš„åšå®¢</section><section class=powerby>Â©2017-2021 Copyright Kindem<br>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=2.3.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>