<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="育碧 Ghost Recon 地表工具和技术的分享，地表 IdMap 方案的经典 Talk。"><meta name=keywords content="idmap,splat,ubi,ghost recon,terrain"><title>GDC 笔记 - 'Ghost Recon Wildlands': Terrain Tools and Technology</title><link rel=canonical href=https://flyandnotdown.github.io/post/51/><link rel=stylesheet href=/scss/style.min.css><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?a0c486208ba4751b6988ccc92f1479ee",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><meta property="og:title" content="GDC 笔记 - 'Ghost Recon Wildlands': Terrain Tools and Technology"><meta property="og:description" content="育碧 Ghost Recon 地表工具和技术的分享，地表 IdMap 方案的经典 Talk。"><meta property="og:url" content="https://flyandnotdown.github.io/post/51/"><meta property="og:site_name" content="Kindem的博客"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="GDC"><meta property="article:published_time" content="2022-02-21T00:00:00+00:00"><meta property="article:modified_time" content="2022-02-21T00:00:00+00:00"><meta name=twitter:title content="GDC 笔记 - 'Ghost Recon Wildlands': Terrain Tools and Technology"><meta name=twitter:description content="育碧 Ghost Recon 地表工具和技术的分享，地表 IdMap 方案的经典 Talk。"><link rel="shortcut icon" href=#ZgotmplZ><script async src="https://www.googletagmanager.com/gtag/js?id=G-F3YCH8P4PP"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-F3YCH8P4PP",{anonymize_ip:!1})}</script></head><body><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.body.dataset.scheme="dark":document.body.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended article-page with-toolbar"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=切换菜单>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header class=site-info><figure class=site-avatar><img src=/img/avatar_hu0f5c0aa158a4e8466efa1fc48b48096f_378948_300x0_resize_q75_box.jpg width=300 height=300 class=site-logo loading=lazy alt=Avatar>
<span class=emoji>🎯</span></figure><h1 class=site-name><a href=https://flyandnotdown.github.io/>Kindem的博客</a></h1><h2 class=site-description>层楼终究误少年，自由早晚乱余生</h2></header><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>归档</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>搜索</span></a></li><li><a href=/friends/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>友链</span></a></li><li><a href=/%E5%85%B3%E4%BA%8E/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>关于</span></a></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>暗色模式</span></li></ol></aside><main class="main full-width"><div id=article-toolbar><a href=https://flyandnotdown.github.io/ class=back-home><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18"/></svg><span>Back</span></a></div><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/%E6%8A%80%E6%9C%AF/>技术</a></header><h2 class=article-title><a href=/post/51/>GDC 笔记 - 'Ghost Recon Wildlands': Terrain Tools and Technology</a></h2><h3 class=article-subtitle>育碧 Ghost Recon 地表工具和技术的分享，地表 IdMap 方案的经典 Talk。</h3><footer class=article-time><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--published>Feb 21, 2022</time></footer></div></header><section class=article-content><blockquote><p>原文链接：<a class=link href=https://www.gdcvault.com/play/1024708/-Ghost-Recon-Wildlands-Terrain target=_blank rel=noopener>&lsquo;Ghost Recon Wildlands&rsquo;: Terrain Tools and Technology</a></p></blockquote><p><figure style=flex-grow:175;flex-basis:421px><a href=/post/51/1.png data-size=1374x782><img src=/post/51/1.png srcset="/post/51/1_hu6795b082685ecc0d50d39de012f2d9ca_1687850_480x0_resize_box_3.png 480w, /post/51/1_hu6795b082685ecc0d50d39de012f2d9ca_1687850_1024x0_resize_box_3.png 1024w" width=1374 height=782 loading=lazy></a></figure></p><p>地图规格。</p><p><figure style=flex-grow:175;flex-basis:421px><a href=/post/51/2.png data-size=1369x780><img src=/post/51/2.png srcset="/post/51/2_hu5a9484ae4e722732ad29cbb737680be9_2169881_480x0_resize_box_3.png 480w, /post/51/2_hu5a9484ae4e722732ad29cbb737680be9_2169881_1024x0_resize_box_3.png 1024w" width=1369 height=780 loading=lazy></a></figure></p><p>11 种生态群落，140 种地表材质。</p><p><figure style=flex-grow:176;flex-basis:424px><a href=/post/51/3.png data-size=1371x775><img src=/post/51/3.png srcset="/post/51/3_hu15fe457744f60e3d042aa0453331144d_1715140_480x0_resize_box_3.png 480w, /post/51/3_hu15fe457744f60e3d042aa0453331144d_1715140_1024x0_resize_box_3.png 1024w" width=1371 height=775 loading=lazy></a></figure></p><p>河流面积与顶点。</p><p><figure style=flex-grow:176;flex-basis:423px><a href=/post/51/4.png data-size=1370x777><img src=/post/51/4.png srcset="/post/51/4_hu8e084f7ce2cb2660a9ab04b119c1ea67_2692238_480x0_resize_box_3.png 480w, /post/51/4_hu8e084f7ce2cb2660a9ab04b119c1ea67_2692238_1024x0_resize_box_3.png 1024w" width=1370 height=777 loading=lazy></a></figure></p><p>植被与石头。</p><p><figure style=flex-grow:175;flex-basis:420px><a href=/post/51/5.png data-size=1370x782><img src=/post/51/5.png srcset="/post/51/5_hufa5186d855cc28a93a7bad9b2ec631be_2244939_480x0_resize_box_3.png 480w, /post/51/5_hufa5186d855cc28a93a7bad9b2ec631be_2244939_1024x0_resize_box_3.png 1024w" width=1370 height=782 loading=lazy></a></figure></p><p>道路、贴花。</p><p><figure style=flex-grow:175;flex-basis:421px><a href=/post/51/6.png data-size=1366x778><img src=/post/51/6.png srcset="/post/51/6_hu518ca9a57c459cafb90eff2ff9464d46_1096658_480x0_resize_box_3.png 480w, /post/51/6_hu518ca9a57c459cafb90eff2ff9464d46_1096658_1024x0_resize_box_3.png 1024w" width=1366 height=778 loading=lazy></a></figure></p><p>铁路网。</p><p><figure style=flex-grow:176;flex-basis:424px><a href=/post/51/7.png data-size=1378x780><img src=/post/51/7.png srcset="/post/51/7_hua8e93ad1bda6cf905e695e9a0593b1a6_1168098_480x0_resize_box_3.png 480w, /post/51/7_hua8e93ad1bda6cf905e695e9a0593b1a6_1168098_1024x0_resize_box_3.png 1024w" width=1378 height=780 loading=lazy></a></figure></p><p>建筑与聚落。</p><p><figure style=flex-grow:175;flex-basis:422px><a href=/post/51/8.png data-size=1365x776><img src=/post/51/8.png srcset="/post/51/8_hu4d5fdb2190857967ce52e2bff3b1562b_771210_480x0_resize_box_3.png 480w, /post/51/8_hu4d5fdb2190857967ce52e2bff3b1562b_771210_1024x0_resize_box_3.png 1024w" width=1365 height=776 loading=lazy></a></figure></p><p>GPU 雕刻工具的介绍。</p><p><figure style=flex-grow:176;flex-basis:423px><a href=/post/51/9.png data-size=1367x774><img src=/post/51/9.png srcset="/post/51/9_hu0a37623b814833614f0018a0948ac4b0_1275137_480x0_resize_box_3.png 480w, /post/51/9_hu0a37623b814833614f0018a0948ac4b0_1275137_1024x0_resize_box_3.png 1024w" width=1367 height=774 loading=lazy></a></figure></p><p>基于 World Machine 开发了一套程序化生成的管线，用于自动生成高度图，作为后续地形编辑的 Input。</p><p><figure style=flex-grow:175;flex-basis:421px><a href=/post/51/10.png data-size=1372x781><img src=/post/51/10.png srcset="/post/51/10_hud238e21eed246e3b61ea09871444f5e8_2236817_480x0_resize_box_3.png 480w, /post/51/10_hud238e21eed246e3b61ea09871444f5e8_2236817_1024x0_resize_box_3.png 1024w" width=1372 height=781 loading=lazy></a></figure></p><p>美术规格。</p><p><figure style=flex-grow:176;flex-basis:423px><a href=/post/51/11.png data-size=1371x777><img src=/post/51/11.png srcset="/post/51/11_hu727c9d8598716469841a4ca85cf070f7_1682086_480x0_resize_box_3.png 480w, /post/51/11_hu727c9d8598716469841a4ca85cf070f7_1682086_1024x0_resize_box_3.png 1024w" width=1371 height=777 loading=lazy></a></figure></p><p>做了一个非常快速的 GPU-Based 的地形雕刻工具，最多可以一次雕刻 2km x 2km 的地块。</p><p><figure style=flex-grow:174;flex-basis:419px><a href=/post/51/12.png data-size=1370x784><img src=/post/51/12.png srcset="/post/51/12_hu8e1193956f5e5c63331c723aa7e77d5e_1665600_480x0_resize_box_3.png 480w, /post/51/12_hu8e1193956f5e5c63331c723aa7e77d5e_1665600_1024x0_resize_box_3.png 1024w" width=1370 height=784 loading=lazy></a></figure></p><p>对高度图做了分层，Base 层是 World Matchine 的输出，不会被改变，Editor 产生的修改被放到 Macro 层。DCC 层专门放置 Houdini 生成的修改，后面会具体讲。Micro 则存放关卡美术做的微小调整。</p><p><figure style=flex-grow:175;flex-basis:421px><a href=/post/51/13.png data-size=1366x778><img src=/post/51/13.png srcset="/post/51/13_hu22f4e225c12f70e1238db2f5cdd32b75_784941_480x0_resize_box_3.png 480w, /post/51/13_hu22f4e225c12f70e1238db2f5cdd32b75_784941_1024x0_resize_box_3.png 1024w" width=1366 height=778 loading=lazy></a></figure></p><p>地表。</p><p><figure style=flex-grow:176;flex-basis:422px><a href=/post/51/14.png data-size=1374x780><img src=/post/51/14.png srcset="/post/51/14_hub91557aaf41a90839d406ed5765e423f_1843858_480x0_resize_box_3.png 480w, /post/51/14_hub91557aaf41a90839d406ed5765e423f_1843858_1024x0_resize_box_3.png 1024w" width=1374 height=780 loading=lazy></a></figure></p><p>目标是生成真实、高质量的地表，然而这么大的地图纯手刷不可能搞定。</p><p><figure style=flex-grow:176;flex-basis:424px><a href=/post/51/15.png data-size=1368x774><img src=/post/51/15.png srcset="/post/51/15_huee2a2740064eeac63febda36c47f74ed_1537741_480x0_resize_box_3.png 480w, /post/51/15_huee2a2740064eeac63febda36c47f74ed_1537741_1024x0_resize_box_3.png 1024w" width=1368 height=774 loading=lazy></a></figure></p><p>尝试了一个简单的规则，按照地形的 Normal 做灰色到白色的插值，其实就能生成一个不错的山脉地表了，可以按照这个思路扩展地表的生成规则。</p><p><figure style=flex-grow:175;flex-basis:422px><a href=/post/51/16.png data-size=1370x779><img src=/post/51/16.png srcset="/post/51/16_hu776572f659fb0d33fc604724348bcc1b_1883697_480x0_resize_box_3.png 480w, /post/51/16_hu776572f659fb0d33fc604724348bcc1b_1883697_1024x0_resize_box_3.png 1024w" width=1370 height=779 loading=lazy></a></figure></p><p>最终定下来的用于程序化生成的参数有四个，坡度、高度、噪声、曲率，按照这几个参数在 Pixel Shader 里面实时计算。</p><p><figure style=flex-grow:175;flex-basis:420px><a href=/post/51/17.png data-size=1416x809><img src=/post/51/17.png srcset="/post/51/17_hu6704cbe94abddb9ea00bb3d2d70522f3_1571676_480x0_resize_box_3.png 480w, /post/51/17_hu6704cbe94abddb9ea00bb3d2d70522f3_1571676_1024x0_resize_box_3.png 1024w" width=1416 height=809 loading=lazy></a></figure></p><p>美术工具截图，修改参数就可以实时生成地表看到效果，非常方便。</p><p><figure style=flex-grow:177;flex-basis:426px><a href=/post/51/18.png data-size=1425x802><img src=/post/51/18.png srcset="/post/51/18_hu200453c8fb5c05e6d75fe52b48f19c17_1652782_480x0_resize_box_3.png 480w, /post/51/18_hu200453c8fb5c05e6d75fe52b48f19c17_1652782_1024x0_resize_box_3.png 1024w" width=1425 height=802 loading=lazy></a></figure></p><p>虽然现在可以一键生成地表了，但是有些过渡的地方还是显得不太自然。于是又支持了美术手刷地表。</p><p><figure style=flex-grow:175;flex-basis:421px><a href=/post/51/19.png data-size=1281x730><img src=/post/51/19.png srcset="/post/51/19_hua6c14b51c4327ab1ad9beb1853b562d6_1385725_480x0_resize_box_3.png 480w, /post/51/19_hua6c14b51c4327ab1ad9beb1853b562d6_1385725_1024x0_resize_box_3.png 1024w" width=1281 height=730 loading=lazy></a></figure></p><p><figure style=flex-grow:175;flex-basis:421px><a href=/post/51/20.png data-size=1278x727><img src=/post/51/20.png srcset="/post/51/20_hucf3349b306f5d146ef04658abfbfcbe1_1321612_480x0_resize_box_3.png 480w, /post/51/20_hucf3349b306f5d146ef04658abfbfcbe1_1321612_1024x0_resize_box_3.png 1024w" width=1278 height=727 loading=lazy></a></figure></p><p>地表最终会被保存为两张纹理，分别叫 Splatting Texture (R8) 和 Vista Texture (BC5)，Splatting Texture 中保存了当前地表所对应的材质索引，Vista Texture 保存的是一个简单的 Albedo，用于远处地表的渲染。</p><p><figure style=flex-grow:176;flex-basis:422px><a href=/post/51/21.png data-size=1277x725><img src=/post/51/21.png srcset="/post/51/21_hub951ec9e5d9a755fe24df71c372e0522_1185545_480x0_resize_box_3.png 480w, /post/51/21_hub951ec9e5d9a755fe24df71c372e0522_1185545_1024x0_resize_box_3.png 1024w" width=1277 height=725 loading=lazy></a></figure></p><p>地块是按照四叉树存储的，每一个四叉树节点都带 Payload，包含 LOD、Culling、Streaming 信息。这些节点会根据距离相机的距离进行 Streaming In / Out。</p><p><figure style=flex-grow:176;flex-basis:422px><a href=/post/51/22.png data-size=1279x726><img src=/post/51/22.png srcset="/post/51/22_hu11f2e5a1c8415e375eb923915b9311ef_697287_480x0_resize_box_3.png 480w, /post/51/22_hu11f2e5a1c8415e375eb923915b9311ef_697287_1024x0_resize_box_3.png 1024w" width=1279 height=726 loading=lazy></a></figure></p><p>地表材质。</p><p><figure style=flex-grow:175;flex-basis:422px><a href=/post/51/23.png data-size=1277x726><img src=/post/51/23.png srcset="/post/51/23_hud34f9d36af7c3fa1c409e3c94c66decc_1749763_480x0_resize_box_3.png 480w, /post/51/23_hud34f9d36af7c3fa1c409e3c94c66decc_1749763_1024x0_resize_box_3.png 1024w" width=1277 height=726 loading=lazy></a></figure></p><p>地表材质当然包含经典 PBR 纹理。</p><p><figure style=flex-grow:175;flex-basis:422px><a href=/post/51/24.png data-size=1281x728><img src=/post/51/24.png srcset="/post/51/24_hu74985ce98345c6219430bdc5b9d8d6fb_2156989_480x0_resize_box_3.png 480w, /post/51/24_hu74985ce98345c6219430bdc5b9d8d6fb_2156989_1024x0_resize_box_3.png 1024w" width=1281 height=728 loading=lazy></a></figure></p><p>还包含一张 Displacement 纹理，用于地形曲面细分的。</p><p><figure style=flex-grow:175;flex-basis:421px><a href=/post/51/25.png data-size=1280x729><img src=/post/51/25.png srcset="/post/51/25_hu6359b7687ed703890e29b88be40b4034_1666876_480x0_resize_box_3.png 480w, /post/51/25_hu6359b7687ed703890e29b88be40b4034_1666876_1024x0_resize_box_3.png 1024w" width=1280 height=729 loading=lazy></a></figure></p><p>地表基本都是由四层材质混合的（Splatting Map 是双线性插值，所以是四层），所有地表材质一共有 143 种，所以一次把所有纹理加载进来是不可能的。</p><p><figure style=flex-grow:177;flex-basis:425px><a href=/post/51/26.png data-size=1286x726><img src=/post/51/26.png srcset="/post/51/26_hudaef85a71db8c83cea12230814f44015_1416557_480x0_resize_box_3.png 480w, /post/51/26_hudaef85a71db8c83cea12230814f44015_1416557_1024x0_resize_box_3.png 1024w" width=1286 height=726 loading=lazy></a></figure></p><p>做法是动态将地块用到的纹理合成一组 Texture2DArray，这里 Array 最多 32 层，也就意味着每一个地块最多只能使用 32 种材质。由于是动态合成的 Array，在 Shader 里还会有一次 Index 的转换。</p><p><figure style=flex-grow:174;flex-basis:419px><a href=/post/51/27.png data-size=1279x731><img src=/post/51/27.png srcset="/post/51/27_hu870fac752a4acd3606322402ceb4b811_700568_480x0_resize_box_3.png 480w, /post/51/27_hu870fac752a4acd3606322402ceb4b811_700568_1024x0_resize_box_3.png 1024w" width=1279 height=731 loading=lazy></a></figure></p><p>近景渲染。</p><p><figure style=flex-grow:176;flex-basis:422px><a href=/post/51/28.png data-size=1277x725><img src=/post/51/28.png srcset="/post/51/28_hu427d24548794c2d5043fff1f4d7e95f1_1909364_480x0_resize_box_3.png 480w, /post/51/28_hu427d24548794c2d5043fff1f4d7e95f1_1909364_1024x0_resize_box_3.png 1024w" width=1277 height=725 loading=lazy></a></figure></p><p>先看最终效果，下面会依次分析渲染流程。</p><p><figure style=flex-grow:176;flex-basis:423px><a href=/post/51/29.png data-size=1278x724><img src=/post/51/29.png srcset="/post/51/29_huc6eb853722d16a873eb7328c45adb025_1917406_480x0_resize_box_3.png 480w, /post/51/29_huc6eb853722d16a873eb7328c45adb025_1917406_1024x0_resize_box_3.png 1024w" width=1278 height=724 loading=lazy></a></figure></p><p>先看单个地表材质（点采样）的渲染，因为只取了一种材质的纹理，所以看起来是格子状的。整个流程是先去采样 Splatting Texture 拿到 Material Index，然后拿到 Material Index 转换到 Texture Array Index，然后再采样 Texture Array 拿到材质的纹理进行渲染。</p><p><figure style=flex-grow:161;flex-basis:386px><a href=/post/51/30.png data-size=958x595><img src=/post/51/30.png srcset="/post/51/30_hu7ee8a8e878be695ab5e4f7ef87cc4163_64394_480x0_resize_box_3.png 480w, /post/51/30_hu7ee8a8e878be695ab5e4f7ef87cc4163_64394_1024x0_resize_box_3.png 1024w" width=958 height=595 loading=lazy></a></figure></p><p>实际上渲染当然不会只做一次点采样，实际上对 Splatting Texture 进行采样的时候会借助双线性插值的思想，取相邻的四个像素取得四个 Material Index，然后根据离临近像素的距离来做权重混合。</p><p><figure style=flex-grow:175;flex-basis:422px><a href=/post/51/31.png data-size=1282x729><img src=/post/51/31.png srcset="/post/51/31_hudef0bedf329a95d23cc3330472af346c_1902896_480x0_resize_box_3.png 480w, /post/51/31_hudef0bedf329a95d23cc3330472af346c_1902896_1024x0_resize_box_3.png 1024w" width=1282 height=729 loading=lazy></a></figure></p><p>最终效果就会好很多。</p><p><figure style=flex-grow:175;flex-basis:420px><a href=/post/51/32.png data-size=1276x728><img src=/post/51/32.png srcset="/post/51/32_hu4df0dc8709934665d3607e6a6ff9032d_1913414_480x0_resize_box_3.png 480w, /post/51/32_hu4df0dc8709934665d3607e6a6ff9032d_1913414_1024x0_resize_box_3.png 1024w" width=1276 height=728 loading=lazy></a></figure></p><p>老生常谈的 Slope 渲染问题，因为地表纹理的 UV 变化是按照世界空间的 x 和 y 来的，在比较陡峭的地方变化就会很剧烈，导致拉伸，处理方法一般是 Tri-Planar，就是按三个轴投影，然后按 Normal 做混合。Ghost Recon 的做法好像只是按 x 和 y 两个轴投影。</p><p><figure style=flex-grow:174;flex-basis:418px><a href=/post/51/33.png data-size=1282x735><img src=/post/51/33.png srcset="/post/51/33_hudd133906e5e6cc3260498089ab587d91_1941040_480x0_resize_box_3.png 480w, /post/51/33_hudd133906e5e6cc3260498089ab587d91_1941040_1024x0_resize_box_3.png 1024w" width=1282 height=735 loading=lazy></a></figure></p><p>首先双线性插值一套操作下来就要采样 Splatting Texture 4 次（不是最终采样数，最终采样数还需要计算材质纹理的采样）了，然后处理崖壁又要按两个轴投影，然后直接 x2，变成 8 次，性能堪忧。</p><p><figure style=flex-grow:176;flex-basis:424px><a href=/post/51/34.png data-size=1284x726><img src=/post/51/34.png srcset="/post/51/34_huc0d3513e21db7f1854700f2e1f382d3c_1891528_480x0_resize_box_3.png 480w, /post/51/34_huc0d3513e21db7f1854700f2e1f382d3c_1891528_1024x0_resize_box_3.png 1024w" width=1284 height=726 loading=lazy></a></figure></p><p>优化就是把地表块分成三种，使用不同的 Shader。</p><p><figure style=flex-grow:176;flex-basis:422px><a href=/post/51/35.png data-size=1282x728><img src=/post/51/35.png srcset="/post/51/35_hufa242a6139d141faf826d6afc8932cf8_2134174_480x0_resize_box_3.png 480w, /post/51/35_hufa242a6139d141faf826d6afc8932cf8_2134174_1024x0_resize_box_3.png 1024w" width=1282 height=728 loading=lazy></a></figure></p><p>普通地表就直接双线性采 4 次就完事了。</p><p><figure style=flex-grow:176;flex-basis:423px><a href=/post/51/36.png data-size=1280x725><img src=/post/51/36.png srcset="/post/51/36_hu6d41d7b126529c189932503a6a253fb8_1997064_480x0_resize_box_3.png 480w, /post/51/36_hu6d41d7b126529c189932503a6a253fb8_1997064_1024x0_resize_box_3.png 1024w" width=1280 height=725 loading=lazy></a></figure></p><p>Slope 8 次逃不掉。</p><p><figure style=flex-grow:175;flex-basis:421px><a href=/post/51/37.png data-size=1279x728><img src=/post/51/37.png srcset="/post/51/37_huf42b4a03ed7a7ceacf9dc8d7c2d26c55_2020087_480x0_resize_box_3.png 480w, /post/51/37_huf42b4a03ed7a7ceacf9dc8d7c2d26c55_2020087_1024x0_resize_box_3.png 1024w" width=1279 height=728 loading=lazy></a></figure></p><p>过渡要两种都采，然后做混合。</p><p><figure style=flex-grow:175;flex-basis:422px><a href=/post/51/38.png data-size=1274x724><img src=/post/51/38.png srcset="/post/51/38_hu8fec2f653384f008e15896252cf7b639_2158784_480x0_resize_box_3.png 480w, /post/51/38_hu8fec2f653384f008e15896252cf7b639_2158784_1024x0_resize_box_3.png 1024w" width=1274 height=724 loading=lazy></a></figure></p><p>实测下来效果还行，80% 的地表都只需要采 4 次 Splatting Texture。</p><p><figure style=flex-grow:175;flex-basis:421px><a href=/post/51/39.png data-size=1282x730><img src=/post/51/39.png srcset="/post/51/39_hufea69f2d50fad05a482f280aadbe8559_1636396_480x0_resize_box_3.png 480w, /post/51/39_hufea69f2d50fad05a482f280aadbe8559_1636396_1024x0_resize_box_3.png 1024w" width=1282 height=730 loading=lazy></a></figure></p><p>道路是直接画在地形上的，然而地形的分辨率不够，导致细节丢失，在一个就是用 Splatting Id 的方案过渡很僵硬。</p><p><figure style=flex-grow:174;flex-basis:419px><a href=/post/51/40.png data-size=1277x730><img src=/post/51/40.png srcset="/post/51/40_huc96681680c9c7824de41218ac41a662f_1790821_480x0_resize_box_3.png 480w, /post/51/40_huc96681680c9c7824de41218ac41a662f_1790821_1024x0_resize_box_3.png 1024w" width=1277 height=730 loading=lazy></a></figure></p><p>屏幕空间贴花看起来效果不错。</p><p><figure style=flex-grow:176;flex-basis:423px><a href=/post/51/41.png data-size=1274x722><img src=/post/51/41.png srcset="/post/51/41_hud0be7916222ec64822eeaa329ef8fc98_2178276_480x0_resize_box_3.png 480w, /post/51/41_hud0be7916222ec64822eeaa329ef8fc98_2178276_1024x0_resize_box_3.png 1024w" width=1274 height=722 loading=lazy></a></figure></p><p>但是开销太大了。</p><p><figure style=flex-grow:175;flex-basis:422px><a href=/post/51/42.png data-size=1275x725><img src=/post/51/42.png srcset="/post/51/42_hu680c9938f9928bed41b6687a07a028cc_698036_480x0_resize_box_3.png 480w, /post/51/42_hu680c9938f9928bed41b6687a07a028cc_698036_1024x0_resize_box_3.png 1024w" width=1275 height=725 loading=lazy></a></figure></p><p>Virtual Texture 在地形中的应用。</p><p><figure style=flex-grow:174;flex-basis:419px><a href=/post/51/43.png data-size=1285x735><img src=/post/51/43.png srcset="/post/51/43_hu8e4394512e397a6217211879d2bf002d_1282482_480x0_resize_box_3.png 480w, /post/51/43_hu8e4394512e397a6217211879d2bf002d_1282482_1024x0_resize_box_3.png 1024w" width=1285 height=735 loading=lazy></a></figure></p><p>就是 UE 里的 Runtime Virtual Texture，大家都比较熟悉了，这个技术跟地形很般配。</p><p><figure style=flex-grow:175;flex-basis:421px><a href=/post/51/44.png data-size=1273x724><img src=/post/51/44.png srcset="/post/51/44_hucf356e3470f6bfe4408c2185dd8559ca_1623375_480x0_resize_box_3.png 480w, /post/51/44_hucf356e3470f6bfe4408c2185dd8559ca_1623375_1024x0_resize_box_3.png 1024w" width=1273 height=724 loading=lazy></a></figure></p><p>VT Feedback Pass 必不可少，但是 Ghost Recon 做了一些改进。</p><p><figure style=flex-grow:176;flex-basis:422px><a href=/post/51/45.png data-size=1284x729><img src=/post/51/45.png srcset="/post/51/45_hua70127e6d073fdaebdbda8334c49c887_1093223_480x0_resize_box_3.png 480w, /post/51/45_hua70127e6d073fdaebdbda8334c49c887_1093223_1024x0_resize_box_3.png 1024w" width=1284 height=729 loading=lazy></a></figure></p><p>判断哪些 Page 需要加载进 Physical Texture，最简单的方法就是直接光栅化整个场景，把结果画到一个屏幕空间的 Buffer 上，然后再读回 CPU，如果是 4k 的屏幕开销更离谱。但是如果换低分辨率的 RT 又会损失一些细节。</p><p><figure style=flex-grow:175;flex-basis:421px><a href=/post/51/46.png data-size=1281x730><img src=/post/51/46.png srcset="/post/51/46_hua45cdd1fea6609be1de50d60416bd540_1164120_480x0_resize_box_3.png 480w, /post/51/46_hua45cdd1fea6609be1de50d60416bd540_1164120_1024x0_resize_box_3.png 1024w" width=1281 height=730 loading=lazy></a></figure></p><p>优化方法就是不再单独开 Pass，直接在 G-Buffer Pass 里面完成计算，输出到一张 3D Texture 中，输出的时候拿 (uv, mipLevel) 作为坐标。</p><p><figure style=flex-grow:176;flex-basis:424px><a href=/post/51/47.png data-size=1280x724><img src=/post/51/47.png srcset="/post/51/47_huf5e4b6745fb9e18c0e2dd557714fd5d4_912372_480x0_resize_box_3.png 480w, /post/51/47_huf5e4b6745fb9e18c0e2dd557714fd5d4_912372_1024x0_resize_box_3.png 1024w" width=1280 height=724 loading=lazy></a></figure></p><p>直接用 Compute Pass 算出缺少的部分，然后回读会 CPU。</p><p><figure style=flex-grow:176;flex-basis:422px><a href=/post/51/48.png data-size=1281x727><img src=/post/51/48.png srcset="/post/51/48_hud431bc7dad808391ffb03788905ebd11_1647872_480x0_resize_box_3.png 480w, /post/51/48_hud431bc7dad808391ffb03788905ebd11_1647872_1024x0_resize_box_3.png 1024w" width=1281 height=727 loading=lazy></a></figure></p><p>如果按照 10 Texels / cm 的分辨率，大概需要 2PB 的存储空间，蓝光光盘都塞不下。</p><p><figure style=flex-grow:175;flex-basis:421px><a href=/post/51/49.png data-size=1275x726><img src=/post/51/49.png srcset="/post/51/49_hu2e69a759800cbb961a529074d3fb6bca_974609_480x0_resize_box_3.png 480w, /post/51/49_hu2e69a759800cbb961a529074d3fb6bca_974609_1024x0_resize_box_3.png 1024w" width=1275 height=726 loading=lazy></a></figure></p><p>压缩和 Tiles 的实时生成。</p><p><figure style=flex-grow:176;flex-basis:422px><a href=/post/51/50.png data-size=1281x727><img src=/post/51/50.png srcset="/post/51/50_hu8dc4cac74532d61237788b4ce1c47d22_1550072_480x0_resize_box_3.png 480w, /post/51/50_hu8dc4cac74532d61237788b4ce1c47d22_1550072_1024x0_resize_box_3.png 1024w" width=1281 height=727 loading=lazy></a></figure></p><p>最终的一些参数。</p><p><figure style=flex-grow:176;flex-basis:423px><a href=/post/51/51.png data-size=1279x724><img src=/post/51/51.png srcset="/post/51/51_hu751a28e2e8e24149f1165f372cf198be_1481518_480x0_resize_box_3.png 480w, /post/51/51_hu751a28e2e8e24149f1165f372cf198be_1481518_1024x0_resize_box_3.png 1024w" width=1279 height=724 loading=lazy></a></figure></p><p>Xbox One 上的性能。</p><p><figure style=flex-grow:175;flex-basis:421px><a href=/post/51/52.png data-size=1274x726><img src=/post/51/52.png srcset="/post/51/52_hu67533ad019a8c63ce605aede178523d0_701919_480x0_resize_box_3.png 480w, /post/51/52_hu67533ad019a8c63ce605aede178523d0_701919_1024x0_resize_box_3.png 1024w" width=1274 height=726 loading=lazy></a></figure></p><p>地形相关的一些其他玩意。</p><p><figure style=flex-grow:176;flex-basis:423px><a href=/post/51/53.png data-size=1197x679><img src=/post/51/53.png srcset="/post/51/53_hu6efe3f9077a184bd290dce3705c4348f_1030544_480x0_resize_box_3.png 480w, /post/51/53_hu6efe3f9077a184bd290dce3705c4348f_1030544_1024x0_resize_box_3.png 1024w" width=1197 height=679 loading=lazy></a></figure></p><p>地形不止高度和地表，还保存了一些其他的信息。</p><p><figure style=flex-grow:176;flex-basis:424px><a href=/post/51/54.png data-size=1200x679><img src=/post/51/54.png srcset="/post/51/54_hu41139bbc273bd2f11e6919d8ee9978db_1764462_480x0_resize_box_3.png 480w, /post/51/54_hu41139bbc273bd2f11e6919d8ee9978db_1764462_1024x0_resize_box_3.png 1024w" width=1200 height=679 loading=lazy></a></figure></p><p>道路的生成需要定义一组 Waypoints，然后自动生成路径来连接各个点，形成道路。</p><p><figure style=flex-grow:176;flex-basis:422px><a href=/post/51/55.png data-size=1202x682><img src=/post/51/55.png srcset="/post/51/55_hu2ebc1c6ebe84cf3653864dc546531cc5_868137_480x0_resize_box_3.png 480w, /post/51/55_hu2ebc1c6ebe84cf3653864dc546531cc5_868137_1024x0_resize_box_3.png 1024w" width=1202 height=682 loading=lazy></a></figure></p><p>正常性网格的连接，效果不太行。</p><p><figure style=flex-grow:176;flex-basis:424px><a href=/post/51/56.png data-size=1197x677><img src=/post/51/56.png srcset="/post/51/56_hu1635c8b1531efee4b4c0ec7f3d904ac1_1094939_480x0_resize_box_3.png 480w, /post/51/56_hu1635c8b1531efee4b4c0ec7f3d904ac1_1094939_1024x0_resize_box_3.png 1024w" width=1197 height=677 loading=lazy></a></figure></p><p>随机连接，效果好很多。</p><p><figure style=flex-grow:176;flex-basis:424px><a href=/post/51/57.png data-size=1195x676><img src=/post/51/57.png srcset="/post/51/57_hud10ed678e8dab505b37a37044e4f79b3_1665236_480x0_resize_box_3.png 480w, /post/51/57_hud10ed678e8dab505b37a37044e4f79b3_1665236_1024x0_resize_box_3.png 1024w" width=1195 height=676 loading=lazy></a></figure></p><p><figure style=flex-grow:175;flex-basis:421px><a href=/post/51/58.png data-size=1195x680><img src=/post/51/58.png srcset="/post/51/58_hud77598cc3bc9ce7ccdc09bfd83e2399f_1653168_480x0_resize_box_3.png 480w, /post/51/58_hud77598cc3bc9ce7ccdc09bfd83e2399f_1653168_1024x0_resize_box_3.png 1024w" width=1195 height=680 loading=lazy></a></figure></p><p>道路生成的流程。</p><p><figure style=flex-grow:176;flex-basis:423px><a href=/post/51/59.png data-size=1194x676><img src=/post/51/59.png srcset="/post/51/59_hueb0c31295ff3be9b6fa97603675abd12_1221800_480x0_resize_box_3.png 480w, /post/51/59_hueb0c31295ff3be9b6fa97603675abd12_1221800_1024x0_resize_box_3.png 1024w" width=1194 height=676 loading=lazy></a></figure></p><p>输入输出。</p><p><figure style=flex-grow:176;flex-basis:423px><a href=/post/51/60.png data-size=1196x677><img src=/post/51/60.png srcset="/post/51/60_hu26a9c5b1fd78e12d371ca1e93ddb0157_1494578_480x0_resize_box_3.png 480w, /post/51/60_hu26a9c5b1fd78e12d371ca1e93ddb0157_1494578_1024x0_resize_box_3.png 1024w" width=1196 height=677 loading=lazy></a></figure></p><p>根据生成的道路会顺便生成一些其他的玩意。</p><p><figure style=flex-grow:175;flex-basis:421px><a href=/post/51/61.png data-size=1199x682><img src=/post/51/61.png srcset="/post/51/61_hu5f179ef6d60e76cdefb0eb4e544b77cf_1623219_480x0_resize_box_3.png 480w, /post/51/61_hu5f179ef6d60e76cdefb0eb4e544b77cf_1623219_1024x0_resize_box_3.png 1024w" width=1199 height=682 loading=lazy></a></figure></p><p>火车道也是类似。</p><p><figure style=flex-grow:176;flex-basis:424px><a href=/post/51/62.png data-size=1198x678><img src=/post/51/62.png srcset="/post/51/62_hu9361df34f26be88076975f4158645828_1280904_480x0_resize_box_3.png 480w, /post/51/62_hu9361df34f26be88076975f4158645828_1280904_1024x0_resize_box_3.png 1024w" width=1198 height=678 loading=lazy></a></figure></p><p>河流。</p><p><figure style=flex-grow:176;flex-basis:424px><a href=/post/51/63.png data-size=1196x676><img src=/post/51/63.png srcset="/post/51/63_huf699134f9dbcf7a17cfd9ed8fd91d61f_1629622_480x0_resize_box_3.png 480w, /post/51/63_huf699134f9dbcf7a17cfd9ed8fd91d61f_1629622_1024x0_resize_box_3.png 1024w" width=1196 height=676 loading=lazy></a></figure></p><p>聚落。</p><p><figure style=flex-grow:177;flex-basis:426px><a href=/post/51/64.png data-size=1199x675><img src=/post/51/64.png srcset="/post/51/64_hu3d68bd23579f0b01190a444ae6be959b_1474355_480x0_resize_box_3.png 480w, /post/51/64_hu3d68bd23579f0b01190a444ae6be959b_1474355_1024x0_resize_box_3.png 1024w" width=1199 height=675 loading=lazy></a></figure></p><p>种田。</p><p><figure style=flex-grow:176;flex-basis:422px><a href=/post/51/65.png data-size=1200x681><img src=/post/51/65.png srcset="/post/51/65_hu389989fa7ce74fe92ee4b7c1671e1bc8_1421193_480x0_resize_box_3.png 480w, /post/51/65_hu389989fa7ce74fe92ee4b7c1671e1bc8_1421193_1024x0_resize_box_3.png 1024w" width=1200 height=681 loading=lazy></a></figure></p><p>自动摆石头。</p><p><figure style=flex-grow:175;flex-basis:421px><a href=/post/51/66.png data-size=1199x682><img src=/post/51/66.png srcset="/post/51/66_hubbc983e10bacf606ff728c4281e37b92_1640222_480x0_resize_box_3.png 480w, /post/51/66_hubbc983e10bacf606ff728c4281e37b92_1640222_1024x0_resize_box_3.png 1024w" width=1199 height=682 loading=lazy></a></figure></p><p>植被。</p><p><figure style=flex-grow:175;flex-basis:421px><a href=/post/51/67.png data-size=1201x684><img src=/post/51/67.png srcset="/post/51/67_hu0c471db077459a8f49bbea2cdebd7aa3_1274930_480x0_resize_box_3.png 480w, /post/51/67_hu0c471db077459a8f49bbea2cdebd7aa3_1274930_1024x0_resize_box_3.png 1024w" width=1201 height=684 loading=lazy></a></figure></p><p>声音。</p><p><figure style=flex-grow:176;flex-basis:424px><a href=/post/51/68.png data-size=1200x679><img src=/post/51/68.png srcset="/post/51/68_hu39e53f40389d4dbc8ffa8bc30f23c420_686651_480x0_resize_box_3.png 480w, /post/51/68_hu39e53f40389d4dbc8ffa8bc30f23c420_686651_1024x0_resize_box_3.png 1024w" width=1200 height=679 loading=lazy></a></figure></p><p>145 个工具，一套自动化管线，4 个 TA 负责。</p><p>总结，最有价值的的就是 Material Id 的地表算法，在开放世界地表渲染领域基本已经成为了政治正确的方案，兼顾性能和效果，各种基于 Material Id 的优化方案层出不穷。本篇 GDC 更多关注的是程序化生成方面，渲染方面讲得比较少。</p></section><footer class=article-footer><section class=article-tags><a href=/tags/gdc/>GDC</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-contents--wrapper><h2 class=section-title>相关文章</h2><div class=related-contents><div class="flex article-list--tile"><article><a href=/post/57/><div class=article-details><h2 class=article-title>GDC 笔记 - Simulating Tropical Weather in FARCRY6</h2></div></a></article><article><a href=/post/56/><div class=article-details><h2 class=article-title>GDC 笔记 - FidelityFX Super Resolution 2.0</h2></div></a></article><article><a href=/post/53/><div class=article-details><h2 class=article-title>GDC 笔记 - Quadtree Displacement Mapping with Height Blending</h2></div></a></article><article><a href=/post/52/><div class=article-details><h2 class=article-title>GDC 笔记 - Terrain Rendering in 'Far Cry 5'</h2></div></a></article><article><a href=/post/58/><div class=article-details><h2 class=article-title>如何以酷炫的姿势造一个 C++ 动态反射轮子</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo=FlyAndNotDown/KindemBlog issue-term=title crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>function setUtterancesTheme(e){let t=document.querySelector(".utterances iframe");t&&t.contentWindow.postMessage({type:"set-theme",theme:`github-${e}`},"https://utteranc.es")}addEventListener("message",e=>{if(e.origin!=="https://utteranc.es")return;setUtterancesTheme(document.body.dataset.scheme)}),window.addEventListener("onColorSchemeChange",e=>{setUtterancesTheme(e.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2017 -
2024 Kindem的博客</section><section class=powerby>©2017-2021 Copyright Kindem<br>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=2.3.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>