<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Site on Kindem的博客</title><link>https://flyandnotdown.github.io/tags/site/</link><description>Recent content in Site on Kindem的博客</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Thu, 02 Sep 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://flyandnotdown.github.io/tags/site/index.xml" rel="self" type="application/rss+xml"/><item><title>使用 GitHub Actions 自动推送 URL 至百度站长平台</title><link>https://flyandnotdown.github.io/post/47/</link><pubDate>Thu, 02 Sep 2021 00:00:00 +0000</pubDate><guid>https://flyandnotdown.github.io/post/47/</guid><description>序 起因就是最近在做新版博客 KindemBlog 的 SEO 优化，工作之后也没时间耐心地做引流了，看能不能想想其他方法稍微拯救下博客惨淡的 PV。
印象中百度的自动推送 URL 功能在今年还是去年的时候翻新了一次，翻新后的 API 不再是 GET 请求，而是 POST，再加上辣鸡百度新 API 的 Host 给的协议是 HTTP，这么一来使用 HTTPS 协议的站点就直接暴毙，没法再通过前端来发送 Ajax 请求来推送了，这对静态博客用户（比如我）可是毁灭性打击。
一番思考后，我想到了 GitHub Actions，没错，就没有 Actions 搞不定的事情。整个方案的思路是先写一个 JavaScript 脚本来完成博客仓库下所有博客的扫描，扫描完成后把所有 URL 通过 POST 请求上报到百度的服务器去，然后再用 GitHub Actions 每日定时执行脚本即可。
扫描与推送脚本 其实用 Python 写也可以，但一想到这又是一个展现我非凡的 JavaScript 技术的时候，就有点小激动，果断在博客根目录下：
npm init 之后先把依赖安装一哈：
npm install axios 然后编写脚本，放在 /scripts/baidu-auto-commit.js：
const Axios = require(&amp;#39;axios&amp;#39;); const FileSystem = require(&amp;#39;fs&amp;#39;); const config = { postDir: &amp;#39;content/post&amp;#39;, basePostUrl: &amp;#39;https://flyandnotdown.github.io/post&amp;#39;, targetHost: &amp;#39;http://data.zz.baidu.com/urls?site=https://flyandnotdown.github.io&amp;amp;token=lDsJO81mKXxekZI6&amp;#39;, fixedUrls: [ &amp;#39;https://flyandnotdown.</description></item></channel></rss>